{"ast":null,"code":"import _slicedToArray from\"/Users/hafidmukhlasin/Kantor/2022/random-winner/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),participantCount=_React$useState2[0],setParticipantCount=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),participants=_React$useState4[0],setParticipants=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),displayParticipant=_React$useState6[0],setDisplayParticipant=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),intervalID=_React$useState8[0],setIntervalID=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),submited=_React$useState10[0],setSubmited=_React$useState10[1];var _React$useState11=React.useState(1),_React$useState12=_slicedToArray(_React$useState11,2),winnerCount=_React$useState12[0],setWinnerCount=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),winner=_React$useState14[0],setWinner=_React$useState14[1];React.useEffect(function(){var jsonParticipants=localStorage.participants;if((jsonParticipants===null||jsonParticipants===void 0?void 0:jsonParticipants.length)>0){var storedParticipants=JSON.parse(jsonParticipants);setParticipantCount(storedParticipants.length);setParticipants(storedParticipants);}},[]);var handleSubmit=function handleSubmit(e){e.preventDefault();e.persist();setSubmited(true);setWinnerCount(e.target.winnerCount.value);var intervalID=setInterval(function(){var randomParticipant=Math.floor(Math.random()*participantCount);setDisplayParticipant(participants[randomParticipant]);},30);setIntervalID(intervalID);setWinner('');};var pickWinner=function pickWinner(e){var winners=[];var newParticipants=participants;var newParticipantCount=participantCount;var _loop=function _loop(i){var winnerID=Math.floor(Math.random()*newParticipantCount);var winnerName=newParticipants[winnerID];newParticipants=newParticipants.filter(function(item){return item!==winnerName;});newParticipantCount=newParticipants.length;winners.push(winnerName);setParticipants(newParticipants);setParticipantCount(newParticipantCount);// console.log(winnerID, winnerName, newParticipants.join(', '), newParticipantCount)\n};for(var i=1;i<=winnerCount;i++){_loop(i);}setWinner(winners);localStorage.participants=JSON.stringify(newParticipants);clearInterval(intervalID);};return/*#__PURE__*/_jsxs(\"div\",{children:[!submited&&/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"h4\",children:\"PARTICIPANT COUNT\"}),/*#__PURE__*/_jsxs(\"div\",{children:[participantCount,\" participants or \",/*#__PURE__*/_jsx(Link,{to:\"/input\",className:\"btn btn-primary btn-sm\",children:\"add/edit\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"h4\",children:\"WINNER COUNT\"}),/*#__PURE__*/_jsx(\"input\",{style:{width:'100px',margin:'auto'},type:\"number\",placeholder:\"Regular\",className:\"form-control\",name:\"winnerCount\",defaultValue:\"1\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn btn-primary btn-fab btn-icon btn-round\",disabled:participantCount<=0,children:[/*#__PURE__*/_jsx(\"i\",{className:\"ni ni-settings-gear-65\"}),\" START RANDOM\"]})})})]})}),submited&&winner.length===0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"h2\",children:displayParticipant}),/*#__PURE__*/_jsxs(\"button\",{onClick:pickWinner,type:\"button\",className:\"btn btn-primary btn-fab btn-icon btn-round\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"ni ni-trophy\"}),\" PICK WINNER\"]})]}),submited&&winner.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h2\",children:[\"Winner(s) \",/*#__PURE__*/_jsx(\"i\",{className:\"ni ni-trophy\"}),\":\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"h3\",style:{margin:'20px 0'},children:winner.map(function(name,idx){return/*#__PURE__*/_jsxs(\"div\",{children:[idx+1,\". \",name,\" \\uD83C\\uDF89\"]},idx);})}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setSubmited(false);},type:\"button\",className:\"btn btn-primary btn-fab btn-icon btn-round\",children:[\"PICK ANOTHER WINNER \",/*#__PURE__*/_jsx(\"i\",{className:\"ni ni-bold-right\"})]})]})]});};export default Home;","map":{"version":3,"sources":["/Users/hafidmukhlasin/Kantor/2022/random-winner/src/views/Home.js"],"names":["React","Link","Home","useState","participantCount","setParticipantCount","participants","setParticipants","displayParticipant","setDisplayParticipant","intervalID","setIntervalID","submited","setSubmited","winnerCount","setWinnerCount","winner","setWinner","useEffect","jsonParticipants","localStorage","length","storedParticipants","JSON","parse","handleSubmit","e","preventDefault","persist","target","value","setInterval","randomParticipant","Math","floor","random","pickWinner","winners","newParticipants","newParticipantCount","i","winnerID","winnerName","filter","item","push","stringify","clearInterval","width","margin","map","name","idx"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from \"react-router-dom\";\nconst Home = () => {\n  const [participantCount, setParticipantCount] = React.useState(0)\n  const [participants, setParticipants] = React.useState([])\n  const [displayParticipant, setDisplayParticipant] = React.useState('')\n  const [intervalID, setIntervalID] = React.useState(null)\n  const [submited, setSubmited] = React.useState(false)\n  const [winnerCount, setWinnerCount] = React.useState(1)\n  const [winner, setWinner] = React.useState([])\n\n  React.useEffect(() => {\n    const jsonParticipants = localStorage.participants\n    if (jsonParticipants?.length > 0){\n      const storedParticipants = JSON.parse(jsonParticipants)\n      setParticipantCount(storedParticipants.length)\n      setParticipants(storedParticipants)\n    }\n  }, [])\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    e.persist();\n    setSubmited(true)\n    setWinnerCount(e.target.winnerCount.value)\n    const intervalID = setInterval(() => {\n      const randomParticipant = Math.floor(Math.random() * participantCount);\n      setDisplayParticipant(participants[randomParticipant])\n    }, 30);\n    setIntervalID(intervalID)\n    setWinner('')\n  }\n\n  const pickWinner = (e) => {\n    let winners = []\n    let newParticipants = participants\n    let newParticipantCount = participantCount\n    for (let i = 1; i <= winnerCount; i++) {\n      const winnerID = Math.floor(Math.random() * newParticipantCount);\n      const winnerName = newParticipants[winnerID]\n      newParticipants = newParticipants.filter(item => item !== winnerName);\n      newParticipantCount = newParticipants.length\n      winners.push(winnerName)\n      setParticipants(newParticipants)\n      setParticipantCount(newParticipantCount)\n\n      // console.log(winnerID, winnerName, newParticipants.join(', '), newParticipantCount)\n    }\n    setWinner(winners)\n    localStorage.participants = JSON.stringify(newParticipants)\n    clearInterval(intervalID)\n  }\n\n  return (\n    <div>\n      {!submited &&\n      <form onSubmit={handleSubmit}>\n        <div className=\"row\">\n          <div className=\"col-md-12\">\n            <div className=\"form-group\">\n              <label className=\"h4\">PARTICIPANT COUNT</label>\n              <div>{participantCount} participants or <Link to=\"/input\" className=\"btn btn-primary btn-sm\">add/edit</Link></div> \n            </div>\n          </div>\n          <div className=\"col-md-12\">\n            <div className=\"form-group\">\n              <label className=\"h4\">WINNER COUNT</label>\n              <input style={{ width: '100px', margin: 'auto' }} type=\"number\" placeholder=\"Regular\" className=\"form-control\" name=\"winnerCount\" defaultValue=\"1\" />\n            </div>\n          </div>\n          <div className=\"col-md-12\">\n            <div className=\"form-group\">\n              <button type=\"submit\" className=\"btn btn-primary btn-fab btn-icon btn-round\" disabled={participantCount<=0}>\n                <i className=\"ni ni-settings-gear-65\"></i> START RANDOM\n              </button>\n            </div>\n          </div>\n        </div>\n      </form>\n      }\n\n      {(submited && winner.length===0) &&\n        <>\n          <div className=\"h2\">{displayParticipant}</div>\n          <button onClick={pickWinner} type=\"button\" className=\"btn btn-primary btn-fab btn-icon btn-round\">\n            <i className=\"ni ni-trophy\"></i> PICK WINNER\n          </button>\n        </>\n      }\n\n      {(submited && winner.length>0) &&\n        <>\n          <div className=\"h2\">\n            Winner(s) <i className=\"ni ni-trophy\"></i>:\n          </div>\n          <div className=\"h3\" style={{ margin: '20px 0' }}>\n            {winner.map((name, idx) => <div key={idx}>{idx+1}. {name} 🎉</div>)}\n          </div>\n          <button onClick={() => setSubmited(false) } type=\"button\" className=\"btn btn-primary btn-fab btn-icon btn-round\">\n            PICK ANOTHER WINNER <i className=\"ni ni-bold-right\"></i>\n          </button>\n        </>\n      }\n    </div>\n  );\n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}